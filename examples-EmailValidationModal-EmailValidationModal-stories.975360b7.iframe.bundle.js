"use strict";(self.webpackChunkds_loud_ng=self.webpackChunkds_loud_ng||[]).push([[575],{"./src/examples/EmailValidationModal/EmailValidationModal.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EmailValidationModalStory:()=>EmailValidationModalStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>EmailValidationModal_stories});var react=__webpack_require__("./node_modules/react/index.js");const useLocalStorage=_name=>{const[name]=(0,react.useState)(_name);return{get:()=>{let storaged;try{storaged=window.localStorage.getItem(name)}catch{console.error("Habilitar el localstorage para una mejor experiencia.")}return storaged},set:value=>{try{window.localStorage.setItem(name,value)}catch{console.error("Habilitar el localstorage para una mejor experiencia.")}},remove:()=>{try{window.localStorage.removeItem(name)}catch{console.error("Habilitar el localstorage para una mejor experiencia.")}}}};var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),src=__webpack_require__("./src/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const EmailValidationModal=props=>(0,jsx_runtime.jsxs)(src.gK,{children:[(0,jsx_runtime.jsx)(src.zx,{onClick:props.handleOpneModal,children:"Abrir modal"}),(0,jsx_runtime.jsxs)(src.u_,{cancelButton:{hide:!0},show:!props.isValidEmail&&props.showModal,onClose:props.handleCloseModal,confirmButton:{onClick:()=>{console.log("press continue")},text:"Continuar"},width:"650px",children:[(0,jsx_runtime.jsx)(src.xv,{margin:"b-20",type:"title",children:"Tu email necesita verificación"}),(0,jsx_runtime.jsx)(src.xv,{margin:"b-16",children:"Te enviamos un correo para que lo verifiques y puedas continuar."}),(0,jsx_runtime.jsx)(src.xv,{margin:"b-12",children:"¿No lo recibiste, ni siquiera en spam?"}),props.canResendEmail?(0,jsx_runtime.jsx)(src.zx,{kind:"text",onClick:props.handleResendEmail,size:"md",children:"Reenviar correo"}):(0,jsx_runtime.jsxs)(src.xv,{children:["Reenviar correo en"," ",(0,jsx_runtime.jsx)(src.IT,{endTime:Date.now()+props.time,formatTime:"mm:ss",onFinish:props.onFinishCounter})]})]})]});EmailValidationModal.displayName="EmailValidationModal",EmailValidationModal.propTypes={canResendEmail:prop_types_default().bool,handleCloseModal:prop_types_default().func,handleOpneModal:prop_types_default().func,handleResendEmail:prop_types_default().func,isValidEmail:prop_types_default().bool,onFinishCounter:prop_types_default().func,showModal:prop_types_default().bool,time:prop_types_default().number},EmailValidationModal.defaultProps={canResendEmail:!0,handleCloseModal:null,handleOpneModal:null,handleResendEmail:null,isValidEmail:!1,onFinishCounter:null,showModal:!1,time:0},EmailValidationModal.__docgenInfo={description:"",methods:[],displayName:"EmailValidationModal",props:{canResendEmail:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},handleCloseModal:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},handleOpneModal:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},handleResendEmail:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},isValidEmail:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onFinishCounter:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},showModal:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},time:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1}}};const EmailValidationModalStory=()=>{const localStorage=useLocalStorage("loudDS_last_resend_email_request"),validEmail=useLocalStorage("loudDS_valid_email"),refreshTimer=(0,react.useRef)(null),[isValidEmail,setIsValidEmail]=(0,react.useState)(!0),[canResendEmail,setCanResetEmail]=(0,react.useState)((()=>{const time=localStorage.get();return Date.now()-time>3e5})()),[showModal,setShowModal]=(0,react.useState)(!1);(0,react.useEffect)((()=>()=>clearTimeout(refreshTimer.current)),[]);return(0,jsx_runtime.jsx)(EmailValidationModal,{canResendEmail,handleCloseModal:()=>{refreshTimer.current&&clearTimeout(refreshTimer.current),setShowModal(!1)},handleOpneModal:()=>{"true"===validEmail.get()?setIsValidEmail(!0):(setIsValidEmail(!1),setShowModal(!0),(()=>{refreshTimer.current&&clearTimeout(refreshTimer.current);const timerId=setInterval((()=>{"true"===validEmail.get()&&(setIsValidEmail(!0),clearTimeout(refreshTimer.current))}),5e3);refreshTimer.current=timerId})())},handleResendEmail:()=>{localStorage.set(Date.now()),setCanResetEmail(!1)},isValidEmail,onFinishCounter:()=>{setCanResetEmail(!0)},showModal,time:parseInt(localStorage.get())+3e5-Date.now()})};EmailValidationModalStory.displayName="EmailValidationModalStory";const EmailValidationModal_stories={title:"Test/EmailModal"};EmailValidationModalStory.parameters={...EmailValidationModalStory.parameters,docs:{...EmailValidationModalStory.parameters?.docs,source:{originalSource:'() => {\n  const localStorage = useLocalStorage("loudDS_last_resend_email_request");\n  const validEmail = useLocalStorage("loudDS_valid_email");\n  const refreshTimer = useRef(null);\n  const isFinishCounter = () => {\n    const time = localStorage.get();\n    const now = Date.now();\n    return now - time > COUTER_TIME;\n  };\n  const [isValidEmail, setIsValidEmail] = useState(true);\n  const [canResendEmail, setCanResetEmail] = useState(isFinishCounter());\n  const [showModal, setShowModal] = useState(false);\n  const checkEmail = () => {\n    if (refreshTimer.current) clearTimeout(refreshTimer.current);\n    const timerId = setInterval(() => {\n      if (validEmail.get() === "true") {\n        setIsValidEmail(true);\n        clearTimeout(refreshTimer.current);\n      }\n    }, 5000); //? check email every 5 seconds.\n\n    refreshTimer.current = timerId;\n  };\n\n  //? init check email.\n  useEffect(() => {\n    return () => clearTimeout(refreshTimer.current);\n  }, []); // eslint-disable-line\n\n  const handleCloseModal = () => {\n    if (refreshTimer.current) clearTimeout(refreshTimer.current);\n    setShowModal(false);\n  };\n  const handleFinishCounter = () => {\n    setCanResetEmail(true);\n  };\n  const handleOpneModal = () => {\n    if (validEmail.get() === "true") {\n      setIsValidEmail(true);\n    } else {\n      setIsValidEmail(false);\n      setShowModal(true);\n      checkEmail();\n    }\n  };\n  const handleResendEmail = () => {\n    localStorage.set(Date.now());\n    setCanResetEmail(false);\n  };\n  return <EmailValidationModal canResendEmail={canResendEmail} handleCloseModal={handleCloseModal} handleOpneModal={handleOpneModal} handleResendEmail={handleResendEmail} isValidEmail={isValidEmail} onFinishCounter={handleFinishCounter} showModal={showModal} time={parseInt(localStorage.get()) + COUTER_TIME - Date.now()} />;\n}',...EmailValidationModalStory.parameters?.docs?.source}}};const __namedExportsOrder=["EmailValidationModalStory"];EmailValidationModalStory.__docgenInfo={description:"",methods:[],displayName:"EmailValidationModalStory"}}}]);